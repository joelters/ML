# as_tibble(mad2019)
# # lets extract the income, weights, divide the weights by the sum of all weights
# # and declare the circumstances as factor variables
# Y <- mad2019$Y
# X <- dplyr::select(mad2019,-c(Y,weight))
# wt <- mad2019$weight
# wt <- wt/sum(wt)
# cnames <- names(X)
# X[,cnames] <- lapply(X[,cnames] , factor)
# mad2019 <- as_tibble(cbind(Y,X,wt))
aa = "Lasso"
m <- modest(X,Y,aa)
m <- modest(model.matrix(X),Y,aa)
?model.matrix
XX <- model.matrix(~X)
XX <- model.matrix(~.,X)
m <- modest(model.matrix(~., X),Y,aa)
m <- modest(X,Y,aa)
load_all()
?modest
devtools::document()
load_all()
?modest
devtools::document()
?modest
devtools::document()
?modest
devtools::document()
?modest
devtools::document()
m <- modest(X,Y,aa)
# as_tibble(mad2019)
# # lets extract the income, weights, divide the weights by the sum of all weights
# # and declare the circumstances as factor variables
# Y <- mad2019$Y
# X <- dplyr::select(mad2019,-c(Y,weight))
# wt <- mad2019$weight
# wt <- wt/sum(wt)
# cnames <- names(X)
# X[,cnames] <- lapply(X[,cnames] , factor)
# mad2019 <- as_tibble(cbind(Y,X,wt))
aa = "XGB"
m <- modest(X,Y,aa)
class(m)
# as_tibble(mad2019)
# # lets extract the income, weights, divide the weights by the sum of all weights
# # and declare the circumstances as factor variables
# Y <- mad2019$Y
# X <- dplyr::select(mad2019,-c(Y,weight))
# wt <- mad2019$weight
# wt <- wt/sum(wt)
# cnames <- names(X)
# X[,cnames] <- lapply(X[,cnames] , factor)
# mad2019 <- as_tibble(cbind(Y,X,wt))
aa = "SL"
m <- modest(X,Y,aa, ensemble = c("Lasso", "XGB"))
library("devtools")
load_all()
load_all
load_all()
rm(list = ls())
mad <- mad2109
load_all()
mad <- mad2109
as_tibble(mad2019)
dplyr::as_tibble(mad2019)
mad <- mad2109
mad <- as_tibble(mad2109)
mad <- dplyr::as_tibble(mad2109)
mad <- mad2109
mad <- mad2019
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-c(Y,weights))
X <- dplyr::select(mad,-c(Y,weight))
View(mad)
X <- dplyr::select(mad,-c(Y,wt))
rm(list = ls())
mad2019 <- dplyr::select(mad2019,-wt)
usethis::use_data(mad2019)
usethis::use_data(mad2019, overwrite = TRUE)
load_al()
load_all()
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-c(Y,wt))
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(model.matrix(X),Y,"Lasso")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(model.matrix(~.,X),Y,"Lasso")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(model.matrix(~.,X),Y,"Lasso")
FV1 <- FVest(m1,X,Y,ML = "Lasso")
load_all()
FV1 <- FVest(m1,X,Y,ML = "Lasso")
debug(FVest)
FV1 <- FVest(m1,X,Y,ML = "Lasso")
dim(X)
dim(Xnew)
dim(Y)
length(Y)
length(Ynew)
mean(X == X)
mean(X == Xnew)
mean(Y == Ynew)
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(model.matrix(~.,X),Y,"Lasso")
FV1 <- FVest(m1,X,Y,X,Y,ML = "Lasso")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(model.matrix(~.,X),Y,"Lasso")
FV1 <- FVest(m1,X,Y,X,Y,ML = "Lasso")
dim(X)
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(model.matrix(~.,X),Y,"Lasso")
FV1 <- FVest(m1,model.matrix(~.,X),Y,ML = "Lasso")
undebug(FVest)
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(model.matrix(~.,X),Y,"Lasso")
FV1 <- FVest(m1,model.matrix(~.,X),Y,ML = "Lasso")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(model.matrix(~.,X),Y,"Lasso")
FV1 <- FVest(m1,model.matrix(~.,X),Y,model.matrix(~.,X[1:5,]),Y[1:5],ML = "Lasso")
packageVersion("testthat")
usethis::use_testthat(3)
usethis::use_test("modest")
devtools::load_all(".")
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(model.matrix(~.,X),Y,"Lasso")
debug(modest)
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"Lasso")
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"Lasso")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"Lasso")
debug(modest)
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"Lasso")
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"Lasso")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"Lasso")
FV1 <- FVest(m1,model.matrix(~.,X),Y,model.matrix(~.,X[1:5,]),Y[1:5],ML = "Lasso")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"Lasso")
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "Lasso")
debug(FVest)
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "Lasso")
devtools::load_all(".")
undebug(FVest)
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"Lasso")
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "Lasso")
class(m1)
View(m1)
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"CIF")
View(m1)
devtools::load_all(".")
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("RF","XGB"))
debug(modest)
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("RF","XGB"))
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.RF","SL.XGB"))
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.RF","SL.XGB"))
undebug(modest)
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.RF","SL.XGB"))
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.RF","SL.XGB"))
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.RF","SL.XGB"))
?SuperLearner
libary(SuperLearner)
library(SuperLearner)
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.RF","SL.XGB"))
View(m1)
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.RF","SL.XGB"))
?glmnet
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.Lasso","SL.XGB"))
View(m1)
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.Lasso","SL.XGB"))
?SL.glmnet
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.Lasso","SL.XGB"))
?glmnet
debug(modest)
m1 <- modest(X,Y,"SL", ensemble = c("SL.Lasso","SL.XGB"))
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.Lasso","SL.XGB"))
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.Lasso","SL.XGB"))
debug(modest)
m1 <- modest(X,Y,"SL", ensemble = c("SL.Lasso","SL.XGB"))
undebug(modest)
m1 <- modest(model.matrix(~.,X),Y,"SL", ensemble = c("SL.Lasso","SL.XGB"))
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(model.matrix(~.,X),Y,"SL", ensemble = c("SL.Lasso","SL.XGB"))
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL", ensemble = c("SL.Lasso","SL.XGB"))
View(m1)
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.Ridge","SL.RF","SL.CIF","SL.XGB","SL.CB"))
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.lm2"))
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.Ridge","SL.RF",
"SL.CIF","SL.XGB","SL.CB"))
View(m1)
View(m1)
m <- lm(Y~.,mad)
coef(m)
FV <- predict(m)
sum(is.na(FV))
FV <- predict(m, X[1:5,])
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.lm2"))
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.lm2"))
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.lm2"))
rm(list = ls())
mad <- mad2019[1:500,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.lm2"))
rm(list = ls())
mad <- mad2019[1:1000,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.lm2"))
rm(list = ls())
mad <- mad2019[1:2000,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.lm2"))
rm(list = ls())
mad <- mad2019[1:2000,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"XGB")
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "XGB")
rm(list = ls())
mad <- mad2019[1:2000,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"XGB")
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "XGB")
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:2000,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"XGB")
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "XGB")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"XGB")
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "XGB")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("Lasso","XGB"))
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "SL")
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.XGB"))
rm(list = ls())
mad <- mad2019[1:300,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.XGB"))
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "SL")
rm(list = ls())
mad <- mad2019[1:250,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.Ridge","SL.RF","SL.CIF","SL.XGB","SL.CB"))
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "SL")
?sl
library(SuperLearner)
?sl
??sl
devtools::load_all(".")
rm(list = ls())
mad <- mad2019[1:250,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.Ridge","SL.RF","SL.CIF","SL.XGB","SL.CB"))
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "SL")
class(FV1)
devtools::document()
devtools::load_all(".")
?FVest
devtools::document()
devtools::load_all(".")
?FVest
usethis::use_test("FVest")
class(1:10)
class(c(1:10))
expect_vector(1:10, ptype = integer(), size = 10))
expect_vector(1:10, ptype = integer(), size = 10)
expect_vector(1:10, ptype = integer(), size = 1)
expect_vector(c(1.2,3.5), ptype = numeric(), size = 2)
devtools::load_all(".")
devtools::load_all(".")
expect_vector(FV1, ptype = double[,1], size = 5)
test_that("Lasso has no error and gives vector of correct length", {
m <- modest(X,Y,"Lasso")
expect_no_error(FV1 <- FVest(m,X,Y,X[1:5,],Y[1:5],ML = "Lasso"))
expect_no_error(FV2 <- FVest(m,X,Y,ML = "Lasso"))
expect_vector(FV1, ptype = double[,1], size = 5)
expect_vector(FV2, ptype = numeric(), size = nrow(X))
})
class(FV1)
length(FV1)
expect_length(FV1, 5)
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
debug(FVest)
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.Ridge","SL.RF","SL.CIF","SL.XGB","SL.CB"))
rm(list = ls())
mad <- mad2019[1:250,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.XGB"))
debug(FVest)
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "SL")
?SuperLearner
rm(list = ls())
mad <- mad2019[1:250,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.CB"))
debug(FVest)
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "SL")
rm(list = ls())
mad <- mad2019[1:250,]
X <- dplyr::select(mad,-Y)
Y <- mad$Y
m1 <- modest(X,Y,"SL",
ensemble = c("SL.Lasso","SL.Ridge","SL.RF",
"SL.CIF","SL.XGB","SL.CB"))
debug(FVest)
FV1 <- FVest(m1,X,Y,X[1:5,],Y[1:5],ML = "SL")
?SuperLearner
